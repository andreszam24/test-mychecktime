<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Registro de pacientes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-searchbar [debounce]="1000" (ionInput)="handleInput($event)"
    placeholder="Ingrese el número de cédula para buscar el paciente"></ion-searchbar>

  <ion-fab slot="fixed" vertical="bottom" horizontal="end">
    <ion-fab-button (click)="scan()" [disabled]="!isSupported">
      <ion-icon src="../../../assets/svg/barcode-outline.svg"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>


<ion-card *ngIf="medicalAttention?.patient && medicalAttention?.specialty">
  <ion-list [inset]="true">
    <ion-item detail="false">
      <ion-avatar aria-hidden="true" slot="start">
        <img alt="" src="https://ionicframework.com/docs/img/demos/avatar.svg"/>
      </ion-avatar>
      <ion-label>
        <strong>{{ medicalAttention.patient.name }} {{ medicalAttention.patient.lastname}}</strong><br />
        <ion-text>cc {{ medicalAttention.patient.dni }}</ion-text><br />
        <ion-note color="medium" class="ion-text-wrap">
          {{ medicalAttention.patient.gender }}
        </ion-note>

      </ion-label>
      <div class="metadata-end-wrapper" slot="end">
        <ion-note color="medium"> {{ medicalAttention.patient.birthday }} </ion-note>
        <ion-icon color="medium" name="chevron-forward"></ion-icon>
      </div>

    </ion-item>
    <ion-item detail="false">

      <ion-label>
        <strong>{{ medicalAttention.specialty.name }}</strong><br />
        <ion-text>#Registro: {{ medicalAttention.numeroResgistro }}</ion-text><br/>

      </ion-label>
      <div class="metadata-end-wrapper" slot="end">
        <ion-note color="medium">ASA: {{ medicalAttention.asa }}</ion-note>
        <ion-icon color="medium" name="chevron-forward"></ion-icon>
      </div>
    </ion-item>
    <ion-item detail="false">
      <ion-label>
        <strong>Códigos CUPS</strong><br/>
        <div *ngIf="medicalAttention?.procedureCodes && medicalAttention.procedureCodes.length > 0">
          <ion-item *ngFor="let cup of medicalAttention.procedureCodes">
            <ion-badge slot="start">{{ cup.code }}</ion-badge>
          </ion-item>
        </div>
      </ion-label>
    </ion-item>
  </ion-list>

</ion-card>